<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dreamy Soaps - Shop</title>
  <style>
    body { font-family: 'Arial', sans-serif; margin: 0; padding: 0; background: #fff8f0; }
    header { background: #ffb6b9; padding: 20px; text-align: center; position: relative; }
    header h1 { margin: 0; color: white; font-size: 2.5em; }
    nav { display: flex; justify-content: center; align-items: center; background: #ffe0e0; padding: 10px; position: relative; }
    nav a { margin: 0 15px; text-decoration: none; color: #333; font-weight: bold; }
    .cart-icon {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
    }
    .cart-icon img {
      width: 30px;
      height: 30px;
      cursor: pointer;
    }
    .hero { padding: 50px; text-align: center; background: #ffeaea; }
    .hero h2 { font-size: 2em; }
    .gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; padding: 30px; }
    .soap { background: white; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); padding: 20px; text-align: center; transition: transform 0.3s ease; }
    .soap:hover { transform: scale(1.05); }
    .soap img { width: 100%; height: 200px; object-fit: cover; border-radius: 10px; }
    .soap h3 { margin-top: 10px; }
    .soap .price { color: #ff6f91; font-size: 1.2em; margin: 10px 0; }
    .soap ul { list-style-type: none; padding: 0; color: #666; }
    .soap ul li { margin: 5px 0; }
    .soap button { background: #ff6f91; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
    .soap button:hover { background: #ff3b60; }
    footer { text-align: center; padding: 20px; background: #ffb6b9; color: white; }

    /* Cart Popup Styling */
    .cart-popup {
      display: none;
      position: fixed;
      top: 10%;
      right: 20px;
      background: white;
      padding: 30px;
      width: 400px;
      max-height: 80%;
      overflow-y: auto;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      border-radius: 10px;
      z-index: 1000;
    }
    .cart-popup h3 {
      margin-top: 0;
      color: #ff6f91;
      font-size: 1.8em;
    }
    .close-btn {
      background: #ff6f91;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
      float: right;
    }
    .cart-items {
      margin-top: 20px;
      max-height: 300px;
      overflow-y: auto;
    }
    .cart-item {
      margin-bottom: 15px;
      border-bottom: 1px solid #ccc;
      padding-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1.2em;
    }
    .cart-item h4 {
      margin: 0;
    }
    .quantity-control {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .quantity-control button {
      background: #ff6f91;
      color: white;
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .quantity-control span {
      margin: 0 10px;
    }
    .remove-btn {
      background: transparent;
      border: none;
      color: #ff6f91;
      font-size: 1.5em;
      cursor: pointer;
    }
    .cart-summary {
      margin-top: 20px;
      font-size: 1.5em;
    }
    .checkout-btn {
      background: #ff6f91;
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
      font-size: 1.3em;
    }
    .checkout-btn:hover {
      background: #ff3b60;
    }
  </style>
</head>

<body>

<header>
  <h1>Dreamy Soaps - Shop</h1>
</header>

<nav>
   <a href="index.html">Shop</a>

  <div class="cart-icon">
    <img src="https://cdn-icons-png.flaticon.com/512/263/263142.png" alt="Cart" onclick="openCart()">
  </div>
</nav>

<!-- Cart Popup -->
<div class="cart-popup" id="cartPopup">
  <button class="close-btn" onclick="closeCart()">Close</button>
  <h3>Your Cart</h3>
  <div class="cart-items" id="cartItems">
    <p>Your cart is currently empty.</p>
  </div>
  <div class="cart-summary" id="cartSummary">
    <p>Total Items: <span id="totalItems">0</span></p>
    <p>Total Price: <span id="totalPrice">0</span> LKR</p>
  </div>
  <button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>
</div>

<section class="hero">
  <h2>Welcome to Dreamy Soaps ðŸŒ¸</h2>
  <p>Discover the magic ingredients behind our colorful, handmade soaps.</p>
</section>

<section class="gallery">
  <div class="soap">
    <img src="sp4.jpeg" alt="Blue fresher">
    <h3>Blue fresher</h3>
    <p class="price">1000 LKR</p>
    <ul>
      <li>Lavender Essential Oil</li>
      <li>Dried Lavender Flowers</li>
      <li>Olive Oil</li>
      <li>Coconut Oil</li>
      <li>Shea Butter</li>
    </ul>
    <button onclick="addToCart('Lavender Bliss', 1000)">Add to Cart</button>
  </div>
  <div class="soap">
    <img src="sp1.jpeg" alt="CinnaBar">
    <h3>CinnaBar</h3>
    <p class="price">1000 LKR</p>
    <ul>
      <li>Orange Essential Oil</li>
      <li>Lemon Zest</li>
      <li>Glycerin Soap Base</li>
      <li>Coconut Oil</li>
      <li>Vitamin E</li>
    </ul>
    <button onclick="addToCart('Citrus Burst', 1000)">Add to Cart</button>
  </div>
  <div class="soap">
    <img src="sp2.jpeg" alt="Rose Soap">
    <h3>Rose Dream</h3>
    <p class="price">1000 LKR</p>
    <ul>
      <li>Rose Water</li>
      <li>Rose Petals</li>
      <li>Almond Oil</li>
      <li>Coconut Oil</li>
      <li>Shea Butter</li>
    </ul>
    <button onclick="addToCart('Rose Dream', 1000)">Add to Cart</button>
  </div>
  <div class="soap">
    <img src="sp3.jpeg" alt="TumaJasmine">
    <h3>TumaJasmine</h3>
    <p class="price">1000 LKR</p>
    <ul>
      <li>Tumeric powder</li>
      <li>Jasmine flowers</li>
      <li>Olive Oil</li>
      <li>Coconut Oil</li>
    </ul>
    <button onclick="addToCart('TumaJasmine', 1000)">Add to Cart</button>
  </div>
</section>

<footer>
  <p>&copy; 2025 Dreamy Soaps. All Rights Reserved.</p>
</footer>

<script>
  // Initialize cart from localStorage or an empty array if none exists
  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  // Update the cart in localStorage whenever the cart changes
  function saveCartToLocalStorage() {
    localStorage.setItem('cart', JSON.stringify(cart));
  }

  function addToCart(soapName, price) {
    const existingItem = cart.find(item => item.name === soapName);
    if (existingItem) {
      existingItem.quantity += 1;
    } else {
      cart.push({ name: soapName, price: price, quantity: 1 });
    }
    saveCartToLocalStorage();
    updateCartPopup();
  }

  function updateCartPopup() {
    const cartItems = document.getElementById('cartItems');
    const totalItems = document.getElementById('totalItems');
    const totalPrice = document.getElementById('totalPrice');

    if (cart.length === 0) {
      cartItems.innerHTML = "<p>Your cart is currently empty.</p>";
      totalItems.innerText = '0';
      totalPrice.innerText = '0';
    } else {
      cartItems.innerHTML = cart.map((item, index) => {
        return `<div class="cart-item">
                  <h4>${item.name} - ${item.price} LKR</h4>
                  <div class="quantity-control">
                    <button onclick="updateQuantity(${index}, -1)">-</button>
                    <span>${item.quantity}</span>
                    <button onclick="updateQuantity(${index}, 1)">+</button>
                  </div>
                  <button class="remove-btn" onclick="removeFromCart(${index})">âœ–</button>
                </div>`; 
      }).join('');
      
      const totalItemsCount = cart.reduce((total, item) => total + item.quantity, 0);
      const totalCartPrice = cart.reduce((total, item) => total + item.price * item.quantity, 0);
      
      totalItems.innerText = totalItemsCount;
      totalPrice.innerText = totalCartPrice;
    }
  }

  function updateQuantity(index, change) {
    const item = cart[index];
    item.quantity = Math.max(1, item.quantity + change); 
    saveCartToLocalStorage();
    updateCartPopup();
  }

  function removeFromCart(index) {
    cart.splice(index, 1);
    saveCartToLocalStorage();
    updateCartPopup();
  }

  function openCart() {
    updateCartPopup();
    document.getElementById('cartPopup').style.display = 'block';
  }

  function closeCart() {
    document.getElementById('cartPopup').style.display = 'none';
  }

  function checkout() {
    window.location.href = 'checkpage.html'; // Redirect to the checkout page directly
  }

</script>

</body>
</html>
